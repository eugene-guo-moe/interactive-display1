name = "interactive-display"
main = "index.ts"
compatibility_date = "2024-01-01"

# Environment variables (set via wrangler secret)
# FAL_KEY - API key for FAL.ai
# AWS_ACCESS_KEY_ID - AWS access key for Rekognition
# AWS_SECRET_ACCESS_KEY - AWS secret key for Rekognition
# API_KEY - API key for authenticating requests from the frontend (optional but recommended)

[vars]
PUBLIC_URL = "https://interactive-display.eugene-ff3.workers.dev"
AWS_REGION = "ap-southeast-1"
# Comma-separated list of allowed origins for CORS
ALLOWED_ORIGINS = "https://interactive-display1.vercel.app,https://interactive-display.pages.dev,http://localhost:3000,http://localhost:3004,http://localhost:3005"

# R2 bucket binding
[[r2_buckets]]
binding = "IMAGES_BUCKET"
bucket_name = "history-future-images"

# Durable Object for FAL.ai concurrency limiting (max 40 concurrent)
[[durable_objects.bindings]]
name = "CONCURRENCY_LIMITER"
class_name = "ConcurrencyLimiter"

[[migrations]]
tag = "v1"
new_classes = ["ConcurrencyLimiter"]

# Development settings
[dev]
port = 8787
local_protocol = "http"
